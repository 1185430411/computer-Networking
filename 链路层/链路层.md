## 目录
### 基本问题
####   1.封装成帧
####   2.透明传输
####   3.差错检验

### 信道分类
####   1.广播信道
####   2.点到点信道

### 信道复用技术
####   1.频分复用
####   2.时分复用
####   3.统计时分复用
####   4.波分复用
####   5.码分复用

### 随机访问介质访问控制
#### 一.ALOHA协议
#####      1.纯ALOHA协议
#####      2.时隙ALOHA协议
#### 二.CSMA协议
#### 三.CSMA/CD协议
#### 四.CSMA/CA协议

### PPP协议

### MAC地址

### 局域网

### 以太网

### 交换机

### 虚拟局域网


_______________________________________________________________________________________________________________________________________



# 一.基本问题

### 封装成帧
将网络层传下来的数据报分组添加首部和尾部，用于标记帧的开始与结束。

### 透明传输
“透明”意思是让用户根本感觉不到它的存在。

帧使用头部和尾部来为帧定界。若帧的数据部分含有和头部尾部相同的内容，这时帧的开始与结束位置就会被错误判断。所以若数据部分出现于头部尾部相同的数据，则在该数据前加上转义字符‘ESC’。若数据中本来就有转义字符，则在其之前再加一个转义字符。接收端收到添加了转移字符的数据，并把转义字符去掉，就可以还原出数据，并且用户察觉不到转移字符的曾经存在

### 差错检验
数据链路层普遍采用*循环冗余法（CRC）*来检验比特差错

# 二.信道分类

### 广播信道
一对多通信。一节点发送的数据能被广播信道上所有节点接收到。
所有的节点都在一个广播信道内进行通信，所以要有专门的控制方法来防止冲突的出现。
主要有两种控制方法进行协调，一个是 *信道复用技术*，一个是*CSMA/CD协议*。

### 点对点信道
即一对一通信，过程比较简单，不会发生碰撞，所以才有PPP协议。

#   三·信道复用技术

### 频分复用技术
所有主机在相同时间内平分信道的带宽。

### 时分复用技术
所有主机在不同时间段占用相同的带宽资源。如A先跑20ms，B再跑20ms。

（ps:频分复用技术和时分复用技术一直会占用一部分信道资源，但由于计算机数据的突发性，通信过程可能会一直占着信道无事可干。所以这两种技术对信道的利用率都不高）

### 统计时分复用技术
对时分复用技术的一种改进。不给每个用户固定分配时间，只要有数据就组成统计时分复用帧进行发送。

### 波分复用技术
光的频分复用。由于光的频率很高，因此习惯上用波长而不是频率来表示所使用的光载波。

### 码分复用技术
为每个用户分配 m bit 的码片，并且所有的码片正交。

为了讨论方便，取 m=8，设码片  为 00011011。在拥有该码片的用户发送比特 1 时就发送该码片，发送比特 0 时就发送该码片的反码 11100100。

在计算时将 00011011 记作 (-1 -1 -1 +1 +1 -1 +1 +1)
码分复用需要发送的数据量为原先的 m 倍。


# 四.随机访问介质访问控制

### ALOHA协议
#### 纯ALOHA协议
当网络中一个节点需要发送数据时，可以不进行任何检测就发送。如果在一段时间内没有得到确认，就认为该数据发生了冲突。发送节点需要等待一段时间后重新发送数据，直到发送成功。

#### 时隙ALOHA协议
实习ALOHA协议把所有各站的时间同步起来，并将时间划分为一段段等长的*时隙*。规定只能在每个时隙开始时才送发送一个帧。从而避免用户发送数据的随意性，减少了冲突的可能性，提高了信道的利用率。

### CSMA协议
CSMA即*载波帧听多路访问*，它于ALOHA协议的主要区别就是多了一个载波帧听装置。
#### 1.1-坚持CSMA
一个节点要发送数据，首先帧听信道，若信道空闲，则以概率1（则肯定发）立即发送数据；如果信道忙，则坚持侦听，直到信道空闲，则发送帧。
传播时延对CSMA的性能影响很大。且该协议同样有可能发生冲突。例：A和B同时开始侦听，都侦听到信道空闲，则两个一起发送数据，这毫无疑问会造成冲突。
#### 2.非坚持CSMA
一个节点要发送数据，首先帧听信道，若信道空闲，则发送数据；若信道忙，则放弃侦听，等待一个随机的时间进行侦听。
非坚持的方法使信道的利用率提高，但会增加数据在网络的延迟。
#### 3.p-坚持CSMA
一个节点要发送数据，首先帧听信道，若空闲，则以概率p发送数据，以概率1-p推迟到下一个时隙。p的目的是降低1-坚持CSMA中两个节点同时侦听到信道空闲并同时发送数据的概率。坚持的目的是减少数据在网络中的时延，所以是1-坚持和非坚持的这种方案。

### CSMA/CD协议
即载波侦听多路访问/碰撞检测。适用于总线型网络和半双工通信。在发送数据之前，侦听信道，检测一下总线上是否有其他节点正在发送数据，若有则等信道空闲再发送，否则直接发送。在发送过程中，依然保持对信道的帧听，若有其他节点也在发送数据，则停止发送。概况为：先听后发，边听边发（区别于CSMA协议），冲突停发，随机重发。
在中止传输后，才有二进制指数退避算法等待一段随机的时间后再进行发送：定义参数k，它表示重传次数，但k不会超过10，即k=min{k，10}.再在{0，1，2.....2的k次方-1}之中选出一个数r，重传所需要退避的时间就是r倍基本退让时间。

### CSMA/CA协议
即载波监听多路访问/碰撞避免  这里的碰撞避=避免不是完全避免，而是降低碰撞几率。
CSMA/CA采用三种办法实现碰撞避免：
1.预约信道。发送方在发送数据的同时向其他节点通知主机传输数据所需的时间长度，让其他节点在这段时间中不要发送数据。
2.ACK帧。所有站点收到请求后，向发送方发回一个确认ACK帧，若发送方在规定时间内未收到ACK帧，则认为发送失败，利用二进制指数退避算法来进行重传。
3.RTS/CTS帧。可选的碰撞避免机制，用来解决无线网中的“隐蔽站”问题。

# 五.PPP协议
互联网用户需要连接到某个ISP后才能进入互联网，PPP协议是计算机用户与ISP进行通信时所使用的数据链路协议。
1.PPP协议提供差错检验功能，但不提供纠错功能，它只保证无差错接收，没有序号和确认机制，所以是不可靠的传输协议。
2.仅支持点到点通信，不支持多点线路。
3.只支持全双工通信，故不用CSMA/CD协议。
4.面向字节

与HDLC协议的不同：
1.PPP协议是面向字节的，HDLC协议是面向比特的。
2.PPP协议是不可靠传输协议，HDLC协议是可靠传输协议。

# 六.局域网
局域网是典型的广播信道，网络为一个单位所有，且地理范围和站点有限。可以按照网络拓扑结构对局域网进行分类

# 七.以太网
以太网是一种星型拓扑结构局域网。

早期使用集线器进行连接，集线器是一种物理层设备， 作用于比特而不是帧，当一个比特到达接口时，集线器重新生成这个比特，并将其能量强度放大，从而扩大网络的传输距离，之后再将这个比特发送到其它所有接口。如果集线器同时收到两个不同接口的帧，那么就发生了碰撞。

目前以太网使用交换机替代了集线器，交换机是一种链路层设备，它不会发生碰撞，能根据 MAC 地址进行存储转发。

以太网帧格式：

类型 ：标记上层使用的协议；
数据 ：长度在 46-1500 之间，如果太小则需要填充；
FCS ：帧检验序列，使用的是 CRC 检验方法

# 八.交换机
交换机具有自主学习的能力，学习的是交换表的内容，交换表中储存着MAC地址到接口的映射。
正是因为这种自学能力，交换机可以即插即用，无需网络管理员手动配置交换表内容。

# 九.虚拟局域网
虚拟网可以组建与物理位置无关的逻辑组，只有在同一个虚拟局域网内的成员才能收到数据链路层广播信息











